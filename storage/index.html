
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Mainflux IoT System">
      
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-7.1.7">
    
    
      
        <title>Storage - Mainflux</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.ca7ac06f.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.f1a3b89f.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    <script>function __prefix(e){return new URL("..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#storage" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Mainflux" class="md-header__button md-logo" aria-label="Mainflux" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Mainflux
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Storage
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/mainflux/docs/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Mainflux" class="md-nav__button md-logo" aria-label="Mainflux" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Mainflux
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/mainflux/docs/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Overview
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../architecture/" class="md-nav__link">
        Architecture
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/" class="md-nav__link">
        Getting Started
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../provision/" class="md-nav__link">
        Provision
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../messaging/" class="md-nav__link">
        Messaging
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Storage
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Storage
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#writers" class="md-nav__link">
    Writers
  </a>
  
    <nav class="md-nav" aria-label="Writers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#influxdb-influxdb-writer-and-grafana" class="md-nav__link">
    InfluxDB, InfluxDB Writer and Grafana
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cassandra-and-cassandra-writer" class="md-nav__link">
    Cassandra and Cassandra Writer
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mongodb-and-mongodb-writer" class="md-nav__link">
    MongoDB and MongoDB Writer
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#postgresql-and-postgresql-writer" class="md-nav__link">
    PostgreSQL and PostgreSQL Writer
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#readers" class="md-nav__link">
    Readers
  </a>
  
    <nav class="md-nav" aria-label="Readers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#influxdb-reader" class="md-nav__link">
    InfluxDB Reader
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cassandra-reader" class="md-nav__link">
    Cassandra Reader
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mongodb-reader" class="md-nav__link">
    MongoDB Reader
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#postgresql-reader" class="md-nav__link">
    PostgreSQL Reader
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../lora/" class="md-nav__link">
        LoRa
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../opcua/" class="md-nav__link">
        OPC-UA
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../edge/" class="md-nav__link">
        Edge
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../security/" class="md-nav__link">
        Security
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../authentication/" class="md-nav__link">
        Authentication
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../cli/" class="md-nav__link">
        CLI
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../api/" class="md-nav__link">
        API
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../groups/" class="md-nav__link">
        GROUPS
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../bootstrap/" class="md-nav__link">
        Bootstrap
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../twins/" class="md-nav__link">
        Twins
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../tracing/" class="md-nav__link">
        Tracing
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../dev-guide/" class="md-nav__link">
        Developer's Guide
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../kubernetes/" class="md-nav__link">
        Kubernetes
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../benchmark/" class="md-nav__link">
        Benchmark
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#writers" class="md-nav__link">
    Writers
  </a>
  
    <nav class="md-nav" aria-label="Writers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#influxdb-influxdb-writer-and-grafana" class="md-nav__link">
    InfluxDB, InfluxDB Writer and Grafana
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cassandra-and-cassandra-writer" class="md-nav__link">
    Cassandra and Cassandra Writer
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mongodb-and-mongodb-writer" class="md-nav__link">
    MongoDB and MongoDB Writer
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#postgresql-and-postgresql-writer" class="md-nav__link">
    PostgreSQL and PostgreSQL Writer
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#readers" class="md-nav__link">
    Readers
  </a>
  
    <nav class="md-nav" aria-label="Readers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#influxdb-reader" class="md-nav__link">
    InfluxDB Reader
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cassandra-reader" class="md-nav__link">
    Cassandra Reader
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mongodb-reader" class="md-nav__link">
    MongoDB Reader
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#postgresql-reader" class="md-nav__link">
    PostgreSQL Reader
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/mainflux/docs/edit/master/docs/storage.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="storage">Storage<a class="headerlink" href="#storage" title="Permanent link">#</a></h1>
<p>Mainflux supports various storage databases in which messages are stored:</p>
<ul>
<li>CassandraDB</li>
<li>MongoDB</li>
<li>InfluxDB</li>
<li>PostgreSQL</li>
</ul>
<p>These storages are activated via docker-compose add-ons.</p>
<p>The <code>&lt;project_root&gt;/docker</code> folder contains an <code>addons</code> directory. This directory is used for various services that are not core to the Mainflux platform but could be used for providing additional features.</p>
<p>In order to run these services, core services, as well as the network from the core composition, should be already running.</p>
<h2 id="writers">Writers<a class="headerlink" href="#writers" title="Permanent link">#</a></h2>
<p>Writers provide an implementation of various <code>message writers</code>. Message writers are services that consume Mainflux messages, transform them to desired format and store them in specific data store. There are two types of transformers: JSON and SenML. transformer type is set using the following environment variables: <code>MF_CASSANDRA_WRITER_TRANSFORMER</code>, <code>MF_POSTGRES_WRITER_TRANSFORMER</code>, <code>MF_INFLUX_WRITER_TRANSFORMER</code> and <code>MF_MONGO_WRITER_TRANSFORMER</code>. The default value is <code>SenML</code> Transformer.</p>
<p>JSON transformer can be used for any JSON payload. For the messages that contain <em>JSON array as the root element</em>, JSON Transformer does normalization of the data: it creates a separate JSON message for each JSON object in the root. In order to be processed and stored properly, JSON messages need to contain message format information. For the sake of simplicity, nested JSON objects are flatten to a single JSON object, using composite keys with the default separator <code>/</code>. This implies that the separator character (<code>/</code>) <em>is not allowed in the JSON object key</em>. For example, the following JSON object:</p>
<pre><code class="language-json">{
    &quot;name&quot;: &quot;name&quot;,
    &quot;id&quot;:8659456789564231564,
    &quot;in&quot;: 3.145,
    &quot;alarm&quot;: true,
    &quot;ts&quot;: 1571259850000,
    &quot;d&quot;: {
        &quot;tmp&quot;: 2.564,
        &quot;hmd&quot;: 87,
        &quot;loc&quot;: {
            &quot;x&quot;: 1,
            &quot;y&quot;: 2
        }
    }
}
</code></pre>
<p>will be transformed to:</p>
<pre><code class="language-json">
{
    &quot;name&quot;: &quot;name&quot;,
    &quot;id&quot;:8659456789564231564,
    &quot;in&quot;: 3.145,
    &quot;alarm&quot;: true,
    &quot;ts&quot;: 1571259850000,
    &quot;d/tmp&quot;: 2.564,
    &quot;d/hmd&quot;: 87,
    &quot;d/loc/x&quot;: 1,
    &quot;d/loc/y&quot;: 2
}
</code></pre>
<p>The message format is stored in <em>the subtopic</em>. It's the last part of the subtopic. In the example:</p>
<pre><code>http://localhost:8185/channels/&lt;channelID&gt;/messages/home/temperature/myFormat
</code></pre>
<p>the message format is <code>myFormat</code>. It can be any valid subtopic name, JSON transformer is format-agnostic. The format is used by the JSON message consumers so that they can process the message properly. If the format is not present (i.e. message subtopic is empty), JSON Transformer will report an error.  Message writers will store the message(s) in the table/collection/measurement (depending on the underlying database) with the name of the format (which in the example is <code>myFormat</code>). Mainflux writers will try to save any format received (whether it will be successful depends on the writer implementation and the underlying database), but it's recommended that publishers don't send different formats to the same subtopic.</p>
<p>For SenML transformer, supported message payload formats are SenML+CBOR and SenML+JSON. They are configurable over environment variables in each writer (<code>MF_CASSANDRA_WRITER_CONTENT_TYPE</code>, <code>MF_POSTGRES_WRITER_CONTENT_TYPE</code>, <code>MF_INFLUX_WRITER_CONTENT_TYPE</code> and <code>MF_MONGO_WRITER_CONTENT_TYPE</code>) and expect <code>application/senml+json</code> or <code>application/senml+cbor</code> formats.</p>
<p>Each writer can filter messages based on subjects list that is set in <code>subjects.toml</code> configuration file. If you want to listen on all subjects, just pass one element ["channels.&gt;"], otherwise pass the list of subjects. Here is an example:</p>
<pre><code class="language-toml">[subjects]
filter = [&quot;channels.&gt;&quot;]
</code></pre>
<p>Regarding the <a href="../messaging/#subtopics">Subtopics Section</a> in the messaging page, the example <code>channels/&lt;channel_id&gt;/messages/bedroom/temperature</code> can be filtered as <code>"channels.*.bedroom.temperature"</code>. The formatting of this filtering list is determined by the NATS format (<a href="https://docs.nats.io/nats-concepts/subjects">Subject-Based Messaging</a> &amp; <a href="https://docs.nats.io/nats-concepts/subjects#wildcards">Wildcards</a>).</p>
<h3 id="influxdb-influxdb-writer-and-grafana">InfluxDB, InfluxDB Writer and Grafana<a class="headerlink" href="#influxdb-influxdb-writer-and-grafana" title="Permanent link">#</a></h3>
<p>From the project root execute the following command:</p>
<pre><code class="language-bash">docker-compose -f docker/addons/influxdb-writer/docker-compose.yml up -d
</code></pre>
<p>This will install and start:</p>
<ul>
<li><a href="https://docs.influxdata.com/influxdb">InfluxDB</a> - time series database</li>
<li>InfluxDB writer - message repository implementation for InfluxDB</li>
<li><a href="https://grafana.com">Grafana</a> - tool for database exploration and data visualization and analytics</li>
</ul>
<p>Those new services will take some additional ports:</p>
<ul>
<li>8086 by InfluxDB</li>
<li>8900 by InfluxDB writer service</li>
<li>3001 by Grafana</li>
</ul>
<p>To access Grafana, navigate to <code>http://localhost:3001</code> and login with: <code>admin</code>, password: <code>admin</code></p>
<h3 id="cassandra-and-cassandra-writer">Cassandra and Cassandra Writer<a class="headerlink" href="#cassandra-and-cassandra-writer" title="Permanent link">#</a></h3>
<pre><code class="language-bash">./docker/addons/cassandra-writer/init.sh
</code></pre>
<p><em>Please note that Cassandra may not be suitable for your testing environment because of its high system requirements.</em></p>
<h3 id="mongodb-and-mongodb-writer">MongoDB and MongoDB Writer<a class="headerlink" href="#mongodb-and-mongodb-writer" title="Permanent link">#</a></h3>
<pre><code class="language-bash">docker-compose -f docker/addons/mongodb-writer/docker-compose.yml up -d
</code></pre>
<p>MongoDB default port (27017) is exposed, so you can use various tools for database inspection and data visualization.</p>
<h3 id="postgresql-and-postgresql-writer">PostgreSQL and PostgreSQL Writer<a class="headerlink" href="#postgresql-and-postgresql-writer" title="Permanent link">#</a></h3>
<pre><code class="language-bash">docker-compose -f docker/addons/postgres-writer/docker-compose.yml up -d
</code></pre>
<p>Postgres default port (5432) is exposed, so you can use various tools for database inspection and data visualization.</p>
<h2 id="readers">Readers<a class="headerlink" href="#readers" title="Permanent link">#</a></h2>
<p>Readers provide an implementation of various <code>message readers</code>.
Message readers are services that consume normalized (in <code>SenML</code> format) Mainflux messages from data storage and opens HTTP API for message consumption.
Installing corresponding writer before reader is implied.</p>
<p>Each of the Reader services exposes the same <a href="https://github.com/mainflux/mainflux/blob/master/readers/openapi.yml">HTTP API</a> for fetching messages on its default port.</p>
<p>To read sent messages on channel with id <code>channel_id</code> you should send <code>GET</code> request to <code>/channels/&lt;channel_id&gt;/messages</code> with thing access token in <code>Authorization</code> header. That thing must be connected to  channel with <code>channel_id</code></p>
<p>Response should look like this:</p>
<pre><code class="language-http">HTTP/1.1 200 OK
Content-Type: application/json
Date: Tue, 18 Sep 2018 18:56:19 GMT
Content-Length: 228

{
    &quot;messages&quot;: [
        {
            &quot;Channel&quot;: 1,
            &quot;Publisher&quot;: 2,
            &quot;Protocol&quot;: &quot;mqtt&quot;,
            &quot;Name&quot;: &quot;name:voltage&quot;,
            &quot;Unit&quot;: &quot;V&quot;,
            &quot;Value&quot;: 5.6,
            &quot;Time&quot;: 48.56
        },
        {
            &quot;Channel&quot;: 1,
            &quot;Publisher&quot;: 2,
            &quot;Protocol&quot;: &quot;mqtt&quot;,
            &quot;Name&quot;: &quot;name:temperature&quot;,
            &quot;Unit&quot;: &quot;C&quot;,
            &quot;Value&quot;: 24.3,
            &quot;Time&quot;: 48.56
        }
    ]
}
</code></pre>
<p>Note that you will receive only those messages that were sent by authorization token's owner.
You can specify <code>offset</code> and <code>limit</code> parameters in order to fetch specific group of messages. An example of HTTP request looks like:</p>
<pre><code class="language-bash">curl -s -S -i  -H &quot;Authorization: &lt;thing_token&gt;&quot; http://localhost:&lt;service_port&gt;/channels/&lt;channel_id&gt;/messages?offset=0&amp;limit=5
</code></pre>
<p>If you don't provide these parameters, default values will be used instead: 0 for <code>offset</code> and 10 for <code>limit</code>.</p>
<h3 id="influxdb-reader">InfluxDB Reader<a class="headerlink" href="#influxdb-reader" title="Permanent link">#</a></h3>
<p>To start InfluxDB reader, execute the following command:</p>
<pre><code class="language-bash">docker-compose -f docker/addons/influxdb-reader/docker-compose.yml up -d
</code></pre>
<h3 id="cassandra-reader">Cassandra Reader<a class="headerlink" href="#cassandra-reader" title="Permanent link">#</a></h3>
<p>To start Cassandra reader, execute the following command:</p>
<pre><code class="language-bash">docker-compose -f docker/addons/cassandra-reader/docker-compose.yml up -d
</code></pre>
<h3 id="mongodb-reader">MongoDB Reader<a class="headerlink" href="#mongodb-reader" title="Permanent link">#</a></h3>
<p>To start MongoDB reader, execute the following command:</p>
<pre><code class="language-bash">docker-compose -f docker/addons/mongodb-reader/docker-compose.yml up -d
</code></pre>
<h3 id="postgresql-reader">PostgreSQL Reader<a class="headerlink" href="#postgresql-reader" title="Permanent link">#</a></h3>
<p>To start PostgreSQL reader, execute the following command:</p>
<pre><code class="language-bash">docker-compose -f docker/addons/postgres-reader/docker-compose.yml up -d
</code></pre>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../messaging/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Messaging" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Messaging
            </div>
          </div>
        </a>
      
      
        
        <a href="../lora/" class="md-footer__link md-footer__link--next" aria-label="Next: LoRa" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              LoRa
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright (c) Mainflux
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.b0710199.min.js", "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.76f349be.min.js"></script>
      
    
  </body>
</html>